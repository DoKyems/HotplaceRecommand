# 공공 데이터 및 해쉬태그를 통한 핫플레이스 추천 프로그램



**참여자**

김기범, 김도겸, 김민규, 박종범, 박지원, 박채림



#### 개요

  해당 프로그램은 해쉬태그 및 공공데이터에 근거하여 사용자에게 핫플레이스(여행장소)를 추천해주는 프로그램입니다. 

  최근, 이태원 압사사고 등으로 인하여 국민들이 안전에 대해 높은 관심을 가지고 있습니다. 그럼에도 불구하고 저희 팀은 네이버 플레이스, 인스타그램 등 일반적으로 자주 사용하는 여행장소 검색 프로그램은 안전에 대한 정보를 아예 제공하지 않거나, 혹은 제한적으로 제공하는 등, 이러한 시대적 흐름에 따르지 못하고 있는 것을 확인할 수 있었습니다. 그렇기에 저희는 공공데이터API로부터 안전 사고의 종류 혹은 횟수에 대한 데이터를 받고, 이를 근거로 웹 스크래핑(크롤링)을 진행하여, 안전과 여행장소에 대한 정보를 유저들에게 제공하고자 합니다.

  더 나아가, 기존 프로그램들은 신뢰성 부분에서 한계를 지니고 있습니다. 예컨대 높은 조회수를 위하여 해쉬태그를 남발하거나, 혹은 광고를 위하여 편향된 글을 작성하는 것이 한계라고 볼 수 있겠습니다. 그렇기에 저희는 별도의 신뢰도 평가 프로그램을 계획하여, 과연 해당 리뷰(게시글)이 사용자에게 추천할 수 있을 정도로 신뢰도가 높은지를 별도로 평가하여, 제공할 것입니다.

  이처럼 저희팀은, **안전 정보에 대한 부재**, **신뢰도 부족** 이라는 기존 프로그램의 한계를 해결하여 진실로 필요한 프로그램을 계획하고자 하였습니다.





# Django

작성자 : 1991297 - 박종범

+ Django란 무엇인가?
+ Django의 라이선스
+ Django의 장점과 한계점
+ Django MVT 패턴, 그리고 프로그램 설계 시 고려해야 할 내용
+ Django를 통해 구현해야 할 기능들 (View function)
+ Django가 다룰 데이터 구조에 대하여 (Model과 Template)



#### Django란 무엇인가?

> 'Ridiculously fast - Reassuringly secure - Exceedingly scalable'
>
> Django, The web framework for perfectionists with deadlines.



Python의 오픈소스 웹 프레임 워크로 **빠른 개발(rapid developement)**와 **명확함(clean)** 그리고 **실전적인 디자인(pragmatic design)**을 개발자에게 제공하고자 만들어진 오픈소스 소프트웨어입니다.



#### Django의 라이선스

해당 오픈소스는 **BSD 3-Clause "New" or "Revised"** 라이선스에 기반하고 있습니다. 이는 상업적 사용(Commercial use)가 가능하고, 수정(Modification), 개인적 사용(Private use)가 가능하나, 오픈소스를 포함한 다른 저작물과 마찬가지로 독점적 권리에 대한 주장(Warranty)가 불가능합니다.



#### Django의 장점과 한계점

✔ **GOOD!**

1. Python 기반 웹 프레임 워크이기 때문에 Python이 가진 강력한 장점들을 그대로 이용할 수 있습니다. (EX. 빠른 구현, 강력한 라이브러리, 쉽고 간결한 문법)
2. 진입장벽이 낮습니다. 별도의 데이터베이스 오픈소스 없이, 데이터베이스 테이블을 model.py 클래스로 작성하여 파이썬 코드만으로도 쉽게 제어할 수 있습니다. 또한 웹 서버를 설치하지 않고 파이썬 명령어 하나로 서버를 실행할 수 있습니다. (다만, 저희가 프로젝트에서 다루는 데이터는 용량이 크기 때문에, 별도의 데이터베이스 오픈소스를 구현하였습니다.)
3. 보안 기능을 기본적으로 제공해줍니다. 
4. 관리자 페이지를 기본적으로 제공해줍니다. 따라서 별도 구현 없이 페이지에 대한 관리를 손 쉽게 할 수 있습니다.
5. 많은 유틸리티들을 별도 구현없이 손쉽게 사용할 수 있습니다. 예를 들어 사용자 인증, 로그인 & 로그아웃 기능 등, 반드시 필요한 기능들에 대해서 별도 개발 없이 그대로 사용할 수 있습니다.



❌ **Bad...**

1. Python의 장점을 그대로 이용할 수 있는 것과 동시에, 파이썬이 지는 단점을 그대로 가지고 있습니다. 파이썬은 기본적으로 인터프리터언어이기 때문에 다른 언어로 구현한 프로그램에 비해서 상당히 느립니다.
2. 실시간 영상 및 채팅에 약합니다.  Django는 2003-2004년에 개발이 시작된 반면, 실시간 영상 및 채팅 기능은 그 이후 논의된 영역이기 때문에 해당 부분에 대해 초점을 맞추지 못한채로 오픈소스 소프트웨어가 구성되어 있습니다. 물론, 실시간 서비스를 제공하지 못하는 것은 아니지만, 다른 웹 프레임 워크에 비해서는 편의성이 떨어진다는 한계를 가지고 있습니다.

 

#### Django MVT 패턴, 그리고 프로그램 설계 시 고려해야 할 내용

`MVT`는 `Model`과 `View`, `Template`의 약어입니다. Django는 이 세가지 요소를 중점으로 프로그램을 운용하고 있습니다.

`Model`은 사용될 데이터에 대한 정의를 담고 있습니다. 

`Template`는 클라이언트에게 반환되는 HTML을 작성하는 부분입니다.

`View`는 요청을 받아, 해당 어플리케이션의 기능에 맞는 처리를 진행한 후, 그 결과 데이터를 템플릿처리하여 HTML로 된 응답 데이터를 웹 클라이언트로 반환하는 역할을 수행합니다.



이에 대한 시나리오는 다음과 같습니다

1. 유저가 서버로 해당 데이터를 요청합니다

2. 이를 URL dispatcher가 받아 View function으로 전송합니다.
3. View function은 미리 구성된 프로그램에 따라 이를 가공 및 처리합니다.
4. 그 과정에서 Model의 데이터를 생성, 수정, 삭제 등을 진행합니다.
5. 이에 대한 요청 처리 결과를 Template에 맞춰 생성합니다.
6. 종합적인 결과를 반환합니다.



**이를 근거로 제가 해당 프로젝트에서 고민했던 부분은**

1. **Model의 구성에 대해 고민해 볼 필요가 있었습니다.** 다른 오픈소스(혹은 내부 프로그램)과 상호작용 할 때, 어떠한 구조의 데이터로 상호작용 해야 할지에 대한 설계가 필요했습니다.
2. **View Function에 대해 고민해 볼 필요가 있었습니다.** 어떠한 기능을 구현해야 원하는 목표를 실현시킬 수 있을지에 대해 설계할 필요성이 있었습니다. (Ex) 크롤링한 데이터를 문서화하여 데이터베이스에 저장하는 기능)
3. **Template에 대한 고민이 필요했습니다.** 저희는 웹, 앱 크로스 플랫폼을 계획했기 때문에, Django를 통해 프론트 엔드를 구현하는 것이 아닌 React와 React Native를 통해 프론트 엔드를 구성하기로 결정하였습니다. 이 과정에서 Django와 React & React Native와의 상호작용이 어떻게 진행되어야 하는가에 대한 고민이 필요했습니다.



#### Django를 통해 구현해야 할 기능들 (View function)

1. ##### 자료의 신뢰성 평가를 진행하는 모듈

​	`Scrapy` - `Khaii`와의 연계: 

 	`Scrapy`는 웹 크롤링 오픈소스 프로그램, `Khaii`는 게시글에 대해 형태소 분석을 하여 의미단위(명사, 동사, 형용사 등)로 쪼개주는 프로그램입니다.

​	기존 여행 어플리케이션 혹은 SNS 서비스에서는, 사람들이 많은 조회수를 위해 무분별하게 해쉬태그를 작성하는 한계가 있었습니다. 저희는 신뢰성있는 정보를 사용자에게 추천하고자, 저희가 크롤링한 자료에 대해 신뢰도를 평가할 계획입니다. 해당 자료의 신뢰도가 저희가 설정한 기준점 이하로 떨어지게 되면, 해당 자료는 가공하지 않고 폐기하게 될 것입니다.

​	해당 모듈은 `Scrapy`가 수집해 온 해쉬태그 데이터와, 그리고, `Khaii`가 게시글을 형태소 단위로 분석한 데이터를 서로 비교하여 신뢰도를 평가하게 됩니다. 즉, 해쉬태그에 대한 내용이 게시글에 전혀 언급이 되지 않았을 경우, 신뢰성 평가 모듈은 해당 게시글이 신뢰도가 낮다고 평가하게 되어 해당 폐기하게 됩니다. 



2. ##### 문서화를 진행하는 모듈 

​	`Scrapy`가 크롤링한 해쉬태그와 URL, `Khaii`를 통해 가공한 관련 데이터, `공공 데이터 오픈 API`을 통해 받은 사고 관련 데이터들을 사전에 정한 데이터 구조(양식)에 맞춰 하나로 합치게 됩니다.  이와 같은 문서화가 진행된 정보(information)들은 `MariaDB`(데이터베이스관리프로그램)을 통하여 데이터 베이스로 전달하게 됩니다.

​	문서화는 백 엔드에서 가공한 정보들을 프론트 엔드가 보다 손 쉽게 잘 가공하여 유저들에게 보여줄 수 있도록 양식에 맞춰 정보들을 분류, 정리해 놓는 과정입니다. 예컨대 웹 브라우저와 서버가 다양한 정보를 html 규격에 맞춰 클라이언트에게 보내는 것처럼, 저희 역시 가공한 정보들을 규격에 맞춰 프론트엔드에 보내고자 합니다.



3. ##### Scrapy를 제어하는 모듈

   **`Scrapy`에게 수집 기준점을 제시하는 기능**

​	`Scrapy`를 제어하기 위해 `Scrapy`로 여러가지 정보를 제공하는 모듈이 필요할 것이라고 생각하게 되었습니다. 웹 환경은 상당히 넓기 때문에, 어떤것을 수집해야 하는지에 대한 명확한 근거가 필요할 것이라고 판단했습니다. 그렇기에 해당 모듈은 우선 `공공데이터 오픈 API`를 통해 여행 장소에 대한 자료를 제공받습니다. 주로 각 시도 기관에서 '전라남도_남도여행길잡이'와 같은 `CSV`, `JSON`형식의 파일을 오픈 API를 통해 제공하고 있습니다. 이를 Scrapy의 정보 수집 기준점으로 삼아, 보다 정확한 여행 자료를 수집할 수 있도록 돕고자 합니다.

​	 뿐만 아니라 공공데이터 오픈 API를 통하여 사건사고 데이터를 받고 이를 `Scrapy`에게 수집 기준점으로 제시하여 사건 사고와 관련된 자료를 수집하고자 합니다.

​		**`Scrapy`를 제어하는 기능**

  다음에는 Scrapy가 어느정도 간격으로 데이터를 수집할 것인지에 대한 설정이 필요할 것이라고 생각했습니다. 이에 대한 기준점을 쉽게 변경할 수 있도록 요청을 전달하는 기능을 구현하여 효율적으로 정보를 수집할 수 있도록 하고자 합니다.



4. ##### 프론트엔드와의 상호작용을 진행하는 오픈소스 DRF(Django REST framework)

​	`DRF(Django REST Framework)`는 위와 같은 REST API서버를 쉽게 구축할 수 있도록 도와주는 오픈소스 소프트웨어입니다. 

​	`Django`는 파이썬을 통해 구현된 웹 프레임워크이고, `React` 혹은 `React Native`는 자바스크립트로 구성된 프론트엔드 웹 프레임워크입니다. 따라서 `React`와 연동하기 위해 `Django`를 통해 가공한 데이터들을 `json`형식으로 바꾼 후, 미리 설정한 규약 혹은 포맷에 따라 데이터를 전송할 수 있도록 설정할 필요가 있습니다. 그렇기에 해당 오픈소스 소프트웨어에 근거하여 상호간 통신이 원활히 이루어 질 수 있도록 모듈을 구성해야 할 필요성이 있다고 판단하였습니다.



#### Django가 다룰 데이터 구조 설계에 대하여 (Model과 Template)

​	우선 Scrapy가 무엇을 수집(crawling)하는 지에 대해 설명할 필요가 있습니다. Scrapy는 장소에 대한 키워드를 근거로 키워드와 일치하는 해쉬태그를 찾고, 이를 통해 해쉬태그와 해쉬태그가 달린 게시글, 그리고 해당 URL을 수집하게 됩니다. 즉 `해쉬태그`, `게시글`, `URL` 이 세가지 자료를 수집하여 프로그램에게 제공하게 됩니다.

  이때 Scrapy가 수집한 자료 중 `게시글`은 Khaii가 형태소 단위로 분석하여 재 가공하게 됩니다. 주로 주어(subject) 위주로 형태소를 리스트 형식으로 재 구성하여 문서화를 진행하는 모듈에게 전달하게 됩니다.

​	문서화 모듈은 해쉬태그, 게시글 형태소 리스트, URL을 받아 하나의 문서화를 진행함과 동시에 추가로 해당 장소에서 발생할 수 있는 사고 관련 키워드, 관련 사고에 대한 내용들이 서술된 URL등을 추가하여 문서화를 완료합니다.

​	즉, Django가 다룰 데이터 내용 및 구조는 `해쉬태그`, `관련 정보가 담긴 형태소 리스트`, `해당 URL`, `사건사고 키워드`, `해결책에 대한 URL`, `신뢰도` 이며, 이는 데이터베이스에 저장되었다가 요청 시 제공하는 것으로 프로그램 구성을 계획했습니다.





#### 참조

작성자는 아래 URL을 참고, 인용하여 해당 문서를 작성하였습니다.

Django 공식 홈페이지

https://www.djangoproject.com/  

위키백과 'Django 검색'

https://ko.wikipedia.org/wiki/%EC%9E%A5%EA%B3%A0_(%EC%9B%B9_%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC) ****

멍토 : 장고를 왜 사용할까(특징, 장단점)

https://mungto.tistory.com/302

책 읽는 개발자_테드 : 장고를 사용하는 이유 및 작동 구조를 알아보자

https://scshim.tistory.com/560

헬스하는 감성 개발자 : [Django] 장고의 장점(vs Flask, Pyramid)

https://healthdevelop.tistory.com/entry/Django-%EC%9E%A5%EA%B3%A0%EC%9D%98-%EC%9E%A5%EC%A0%90vs-Flask-Pyramid-Python-%EC%9B%B9-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC

인코덤(incodom.kr) : DRF

http://www.incodom.kr/Django/DRF





# MariaDB

1991297 - 박종범

+ MariaDB란?
+ MariaDB의 라이선스
+ MariaDB를 선택한 이유
+ MariaDB에 무엇이 저장되는가
+ MariaDB에 저장된 자료는 이후 어떻게 활용되는가?



#### MariaDB란? 

관계형 데이터 관리 시스템(RDBMS)입니다. MySQL의 불확실한 라이선스 상태에 반발하여 오픈소스 진영 개발자들이 2009년 발표하여 개발이 진행중인 오픈소스 소프트웨어입니다.



#### MariaDB의 라이선스

**MariaDB는 GPL V2 라이선스를 채택하고 있습니다.**  해당 소프트웨어의 소스코드를 수정 및 포함하여 배포 시, 해당 프로그램의 소스코드를 모두 공개해야 할 의무가 있습니다. 

다만, 다른 데이터베이스관리프로그램이 그렇듯이 서버에서 돌아갈 뿐, 해당 소스코드가 프로그램에 포함되어 수정 및 배포되는 것이 아니기때문에, 해당 프로그램의 소스코드를 공개해야 할 의무는 없습니다. 다만 유료버전을 구매하여 문제에 대한 솔루션을 제공받을 수는 있습니다.



#### MariaDB를 선택한 이유

위에 언급한 것처럼,  MySQL는 오픈소스에 대해 호의적이지 않은 오라클로 넘어갔습니다. 따라서 MySQL는 라이선스가 변경될 수 있다는 불안요소를 가지고 있습니다. 그렇기에 비교적 이러한 부분에서 자유로운 MariaDB를 선택하게 되었습니다.

  또한, MySQL에 비해 MariaDB는 보다 가볍다는 장점을 가지고 있습니다. 또한, 기존 주류였던 MySQL과 완벽한 호환이 가능하다는 장점 역시 존재합니다.

  

#### MariaDB에 무엇이 저장되는가?

MariaDB에는 4가지 요소가 저장됩니다.

첫번째는 해쉬태그입니다. 웹 크롤러 Scrapy가 인스타그램, 네이버 플레이스 등 여행 관련 사이트에서 긁어 온 해쉬태그를 별도로 저장합니다. 

두번째는 URL입니다. 해당 해쉬태그가 작성되어있던 링크를 저장합니다.

세번째는 리뷰를 형태소 분석한 것입니다. 웹 크롤러 Scrapy가 수집해 온 리뷰를 hanspell이 맞춤법 검사 후, khaiii를 통해 리뷰를 품사 별로 분류하게 됩니다.

네번째는 사고 정보입니다. 공공 데이터에서 가져온 사고 정보를 해쉬태그와 비교하여, 해당 장소에서 발생한 사고 정보를 찾아내고, 이를 데이터베이스에 저장하게 됩니다.

이렇게 4개의 요소가 하나의 정보를 이루게 됩니다. 



#### MariaDB에 저장된 자료는 이후 어떻게 활용되는가?

우선 신뢰도 평가를 위해 사용됩니다. 저희는 리뷰 내에 해쉬태그에 해당되는 키워드가 많이 포함될 수록 해당 리뷰의 신뢰도가 높다고 판단하기로 했습니다. 그렇기에 형태소 분석된 리뷰와 해쉬태그를 꺼내어 비교함으로서, 해당 정보의 신뢰도가 높은지 낮은지 판단할 수 있겠습니다.

다음 사고 정보 추출을 위해 사용됩니다. 공공데이터API는 각 장소에서 발생한 사고의 종류와 횟수를 다양한 형식으로 제공하고 있습니다. 이러한 빅 데이터를 미리 크롤링한 해쉬태그와 비교하여, 공공데이터API에서 가져온 빅데이터로부터 유저들에게 제공해야 할 사고 정보를 추출해 냅니다.

위와 같은 작업이 끝나면 4가지 요소 템플릿에 맞춰 구성한 뒤, 프론트에 보내게 됩니다.



#### 출처

https://ko.wikipedia.org/wiki/MariaDB

데이터베이스 비교 분석

https://benlee73.tistory.com/178
